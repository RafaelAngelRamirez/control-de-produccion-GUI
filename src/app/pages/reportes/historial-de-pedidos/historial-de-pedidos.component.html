<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="row">

                    <div class="col-12 mb-5">
                        <h1>Historial de pedidos</h1>
                    </div>

                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [(ngModel)]="folio" type="text" class="form-control">
                            <small id="helpId" class="form-text text-muted">Folio</small>
                        </div>

                    </div>

                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [(ngModel)]="pedido" type="text" class="form-control">
                            <small id="helpId" class="form-text text-muted">Pedido</small>
                        </div>

                    </div>


                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input #ic (change)="seleccionarCliente(ic)" type="text" list="Cliente" class='form-control'>
                            <datalist id='Cliente'>
                              <option *ngFor="let cliente of clientes" [value]="cliente.nombre"> {{cliente.sae}}</option>
                            </datalist>
                            <small id="helpId" class="form-text text-muted">Cliente</small>
                        </div>
                    </div>

                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input #iv (change)="seleccionarVendedor(iv)" type="text" list="vendedor" class='form-control'>
                            <datalist id='vendedor'>
                            <option *ngFor="let vendedor of vendedores" [value]="vendedor.nombre">
                          </datalist>
                            <small id="helpId" class="form-text text-muted">Vendedor</small>
                        </div>

                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input #im (change)="seleccionarModelo(im)" type="text" list="Modelo" class='form-control'>
                            <datalist id='Modelo'>
                            <option *ngFor="let modelo of modelos" [value]='modelo.modelo'>
                          </datalist>
                            <small id="helpId" class="form-text text-muted">Modelo</small>
                        </div>

                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input #it (change)='seleccionarTamano(it)' type="text" list="Tamano" class='form-control'>
                            <datalist id='Tamano'>
                            <option *ngFor="let tamano of tamanos" [value]='tamano.tamano'>
                          </datalist>
                            <small id="helpId" class="form-text text-muted">Tamano</small>
                        </div>

                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input #icolor (change)='seleccionarColor(icolor)' type="text" list="Color" class='form-control'>
                            <datalist id='Color'>
                            <option *ngFor="let color of colores" [value]="color.color">
                          </datalist>
                            <small id="helpId" class="form-text text-muted">Color</small>
                        </div>

                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input #iter (change)='seleccionarTerminado(iter)' type="text" list="Terminado" class='form-control'>
                            <datalist id='Terminado'>
                            <option *ngFor="let terminado of terminados" [value]="terminado.terminado">Audi</option>
                          </datalist>
                            <small id="helpId" class="form-text text-muted">Terminado</small>
                        </div>

                    </div>


                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [ngModel]="fechaDeCreacionDesdeEl| fecha:'YYYY-MM-DD'" (ngModelChange)="fechaDeCreacionDesdeEl = $event" type="date" class="form-control" name="" aria-describedby="helpId" placeholder="">
                            <small id="helpId" class="form-text text-muted">Fecha de creacion desde el </small>
                        </div>
                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [ngModel]="fechaDeCreacionHasta| fecha:'YYYY-MM-DD'" (ngModelChange)="fechaDeCreacionHasta = $event" type="date" class="form-control" name="" aria-describedby="helpId" placeholder="">
                            <small id="helpId" class="form-text text-muted">Fecha de creacion hasta </small>
                        </div>
                    </div>

                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [ngModel]="fechaEntregaEstimadaDesdeEl| fecha:'YYYY-MM-DD'" (ngModelChange)="fechaEntregaEstimadaDesdeEl = $event" type="date" class="form-control" name="" aria-describedby="helpId" placeholder="">
                            <small id="helpId" class="form-text text-muted">Fecha de entrega estimada desde el</small>
                        </div>
                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [ngModel]="fechaEntregaEstimadaHasta| fecha:'YYYY-MM-DD'" (ngModelChange)="fechaEntregaEstimadaHasta = $event" type="date" class="form-control" name="" aria-describedby="helpId" placeholder="">
                            <small id="helpId" class="form-text text-muted">Fecha de entrega estimada hasta</small>
                        </div>
                    </div>

                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [ngModel]="fechaFinalizacionFolioDesdeEl| fecha:'YYYY-MM-DD'" (ngModelChange)="fechaFinalizacionFolioDesdeEl = $event" type="date" class="form-control" name="" aria-describedby="helpId" placeholder="">
                            <small id="helpId" class="form-text text-muted">Fecha de finalizacion del folio desde el</small>
                        </div>
                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <div class="form-group">
                            <input [ngModel]="fechaFinalizacionFolioHasta| fecha:'YYYY-MM-DD'" (ngModelChange)="fechaFinalizacionFolioHasta = $event" type="date" class="form-control" name="" aria-describedby="helpId" placeholder="">
                            <small id="helpId" class="form-text text-muted">Fecha de finalizacion del folio hasta</small>
                        </div>
                    </div>



                    <div class="col-12 col-sm-4 col-lg-3">

                    </div>

                    <div class="col-12 col-sm-4 col-lg-3">
                        <button (click)="limpiar()" type="button" class="btn btn-outline-primary">Limpiar filtros</button>
                    </div>
                    <div class="col-12 col-sm-4 col-lg-3">
                        <button (click)="filtrar()" type="button" class="btn btn-success"><i class="fa fa-search" aria-hidden="true"></i> Filtrar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Historial de pedidos </h4>
                <h6 class="card-subtitle">Modifica los filtros para obtener la informamcion que necesites</h6>



                <div class="table-responsive">
                    <table sortable-table (sorted)="onSorted($event)" class="table">
                        <thead>
                            <tr>
                                <th></th>
                                <th sortable-column='numeroDeFolio'>Folio</th>
                                <th class='fit'>PED</th>
                                <th class='fit'>MOD</th>

                                <th sortable-column='cliente'>Cliente</th>
                                <th sortable-column='vendedor'>Vendedor</th>
                                <th sortable-column='fechaFolio'>Fecha de folio</th>
                                <th sortable-column='fechaFolio'>Fecha de termino de pedido</th>
                                <th sortable-column='fechaFolio'>Fecha de termino de folio</th>
                                <th sortable-column='fechaEntrega'>Tiempo de produccion</th>
                                <th>Cantidad Producida</th>
                                <th>Entregado</th>
                            </tr>
                        </thead>
                        <tbody>


                            <ng-container *ngFor="let folio of folios">
                                <tr *ngFor="let pedido of folio.folioLineas">

                                    <td> <button type="button" class="btn btn-outline-primary"><i class="fas fa-search    "></i></button></td>
                                    <td>
                                        {{folio.numeroDeFolio}}
                                    </td>
                                    <td class='fit'>{{pedido.pedido}}</td>
                                    <td class='fit'>{{pedido.modeloCompleto | modeloCompleto }}</td>

                                    <td>{{folio.cliente.nombre}}</td>
                                    <td>{{folio.vendedor.nombre}}</td>

                                    <td><span class="text-muted"><i class="fa fa-clock-o"></i> {{folio.fechaFolio  | fecha}}</span> </td>
                                    <td><span class="text-muted"><i class="fa fa-clock-o"></i> {{pedido.fechaTerminado | fecha }}</span> </td>
                                    <td><span class="text-muted"><i class="fa fa-clock-o"></i> {{folio.fechaTerminado | fecha }}</span> </td>
                                    <td><span class="text-muted"> {{diferenciaEntreFechas(folio.fechaFolio, pedido.fechaTerminado)}} </span> </td>
                                    <td>{{pedido.cantidadProducida | number }}</td>
                                    <td>
                                        <app-nivel-urgencia [nivel]='pedido.nivelDeUrgencia'></app-nivel-urgencia>
                                    </td>
                                </tr>


                            </ng-container>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>