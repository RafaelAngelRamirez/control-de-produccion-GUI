<div
  *ngIf="!ordenConsultada"
  class="d-flex justify-content-center align-items-center fadeIn animated w-100"
>
  <h1 class="display-1">
    <i class="fas fa-sync fa-spin"></i>
  </h1>
</div>

<ul
  *ngIf="ordenConsultada"
  class="timeline animated fadeIn deley-1"
  id="timeline"
>
  <!-- 
  =====================================
   Trabajado
  =====================================
  -->
  <ng-container
    *ngFor="
      let dep of ordenConsultada?.trayectoRecorrido | keyvalue;
      let i = index
    "
  >
    <li class="li complete">
      <div class="timestamp">
        <span class="author esconde-sobrante">
          {{ dep.value.departamento.nombre | titlecase }}
          <hr />

          {{
            (ordenConsultada?.modeloCompleto.familiaDeProcesos.procesos)[i]
              .proceso.nombre | titlecase
          }}
        </span>
        <span
          title="Orden iniciada el {{
            (dep.value.entrada ? dep.value.entrada : dep.value.recepcion)
              | fecha: 'LLLL'
          }}"
          class="date"
        >
          <i class="fas fa-arrow-right"></i>
          {{
            (dep.value.entrada ? dep.value.entrada : dep.value.recepcion)
              | fecha: 'L'
          }}
        </span>
      </div>

      <a href="javascript:void(0)">
        <div class="status">
          <h4
            class="esconde-sobrante"
            title="Orden terminada el {{
              (dep.value.salida ? dep.value.salida : dep.value.recepcion)
                | fecha: 'LLLL'
            }}"
          >
            <i class="fas fa-clock    "></i>
            <!-- Aqui comparamos contra la salida -->
            {{
              (dep.value.entrada ? dep.value.entrada : dep.value.recepcion)
                | fechaDiferencia: dep.value.salida
            }}

            <br />

            {{ dep.value.salida | fecha: 'L' }}
            <i class="fas fa-arrow-right "></i>
          </h4>
        </div>
      </a>
    </li>
  </ng-container>

  <!-- 
  =====================================
   END Trabajado
  =====================================
  -->

  <!-- 
  =====================================
   Ubicacion actual
  =====================================
  -->
  <li class="li">
    <div class="timestamp">
      <span class="author esconde-sobrante"
        >{{ ordenConsultada?.ubicacionActual?.departamento.nombre | titlecase }}
        <hr />

        {{
          (ordenConsultada?.modeloCompleto.familiaDeProcesos.procesos)[
            ordenConsultada?.ubicacionActual?.orden
          ].proceso.nombre | titlecase
        }}
      </span>
      <span
        title="Orden recibida el {{
          ordenConsultada?.ubicacionActual?.entrada | fecha: 'LLLL'
        }}"
        class="date esconde-sobrante"
      >
        <i class="fas fa-arrow-right"></i>
        {{
          (ordenConsultada?.ubicacionActual?.entrada
            ? ordenConsultada?.ubicacionActual?.entrada
            : ordenConsultada?.ubicacionActual?.recepcion
          ) | fecha: 'L'
        }}
      </span>
    </div>

    <a href="javascript:void(0)">
      <div class="status working">
        <h4
          class="esconde-sobrante"
          title="En proceso {{
            ordenConsultada?.fechaFolio | tiempoTranscurridoInformal
          }}
          "
        >
          <i class="fas fa-clock    "></i>

          {{ ordenConsultada?.fechaFolio | tiempoTranscurridoInformal }}

          <br />

          <app-tiempo-transcurrido
            [inicio]="ordenConsultada?.fechaFolio"
          ></app-tiempo-transcurrido>
          <i class="fas fa-arrow-right "></i>
        </h4>
      </div>
    </a>
  </li>

  <!-- 
  =====================================
   Ubicacion actual
  =====================================
  -->

  <!-- 
  =====================================
   Trayectos que faltan
  =====================================
  -->
  <ng-container
    *ngFor="
      let dep of ordenConsultada?.trayectoNormal | keyvalue;
      let i = index
    "
  >
    <li *ngIf="i >= ignorarHasta" class="li">
      <div class="timestamp">
        <span class="author esconde-sobrante">
          {{ dep.value.departamento.nombre | titlecase }}

          <hr />

          {{
            (ordenConsultada?.modeloCompleto.familiaDeProcesos.procesos)[i]
              .proceso.nombre | titlecase
          }}
        </span>
        <span title="Sin procesar en este departamento" class="date">
          <i class="fas fa-arrow-right"></i>
        </span>
      </div>

      <a href="javascript:void(0)">
        <div class="status">
          <h4 class="esconde-sobrante">
            <i class="fas fa-time    "></i>

            <br />

            <i class="fas fa-arrow-right animated"></i>
          </h4>
        </div>
      </a>
    </li>
  </ng-container>

  <!-- 
  =====================================
   END Trayectos que faltan
  =====================================
  -->
</ul>
